<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<title>bubble-capture</title>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
		<style>
			#div1{
				width:150px;
				height:150px;
				background: red;
			}
			
			#div2{
				width:100px;
				height:100px;
				background: blue;
			}
			
			#div3{
				width:50px;
				height:50px;
				background: black;
			}
		</style>
		<script>
			window.onload=function(){
				/*
					事件冒泡 : 当一个元素接收到事件的时候，会把他接收到的所有传播给他的父级，一直到顶层window.事件冒泡机制
				*/
				var div1=document.getElementById("div1");
				var div2=document.getElementById("div2");
				var div3=document.getElementById("div3");
				
				/*
					事件机制，从外部进入内部，在从内部传到外部。
					捕获机制正好与冒泡机制相反，事件从外部进来，一直进到触发事件的子集，这个过程叫捕获
					第三个参数设置为true，为捕获。如果有一个进去的事件触发了div1，就去执行clickDiv函数。
					如果不捕获，则为冒泡，如果有一个出去的事件触发了div22,就去执行clickDiv函数。
					
					所以，按进入-出去的顺序，执行顺序为div1,div3,div2
				*/
				div1.addEventListener("click",clickDiv,true);
				div2.addEventListener("click",clickDiv,false);
				div3.addEventListener("click",clickDiv,true);
			}
			
			function clickDiv(ev){
				alert(this.id)
			}
		</script>
	</head>
	<body>
		<div id="div1">
			<div id="div2">
				<div id="div3"></div>
			</div>
		</div>
	</body>
</html>
